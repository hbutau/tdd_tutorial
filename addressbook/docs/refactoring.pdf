%PDF-1.4
%“Œ‹ž ReportLab Generated PDF document http://www.reportlab.com
1 0 obj
<< /F1 2 0 R /F2 3 0 R /F3 4 0 R >>
endobj
2 0 obj
<< /BaseFont /Helvetica /Encoding /WinAnsiEncoding /Name /F1 /Subtype /Type1 /Type /Font >>
endobj
3 0 obj
<< /BaseFont /Helvetica-Bold /Encoding /WinAnsiEncoding /Name /F2 /Subtype /Type1 /Type /Font >>
endobj
4 0 obj
<< /BaseFont /Courier /Encoding /WinAnsiEncoding /Name /F3 /Subtype /Type1 /Type /Font >>
endobj
5 0 obj
<< /Contents 9 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 8 0 R /Resources << /Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ] >> /Rotate 0 /Trans <<  >> 
  /Type /Page >>
endobj
6 0 obj
<< /Outlines 10 0 R /PageLabels 11 0 R /PageMode /UseNone /Pages 8 0 R /Type /Catalog >>
endobj
7 0 obj
<< /Author () /CreationDate (D:20160918221210-02'00') /Creator (\(unspecified\)) /Keywords () /ModDate (D:20160918221210-02'00') /Producer (ReportLab PDF Library - www.reportlab.com) 
  /Subject (\(unspecified\)) /Title (Refactoring) /Trapped /False >>
endobj
8 0 obj
<< /Count 1 /Kids [ 5 0 R ] /Type /Pages >>
endobj
9 0 obj
<< /Length 5485 >>
stream
1 0 0 1 0 0 cm  BT /F1 12 Tf 14.4 TL ET
q
1 0 0 1 62.69291 741.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 4 Tm /F2 20 Tf 24 TL 179.3849 0 Td (Refactoring) Tj T* -179.3849 0 Td ET
Q
Q
q
1 0 0 1 62.69291 659.0236 cm
q
BT 1 0 0 1 0 62 Tm .404104 Tw 12 TL /F1 10 Tf 0 0 0 rg (Our last test passed, but unfortunately the method used to generate the html is cumbersome and just not) Tj T* 0 Tw .332619 Tw (good. Since we are using Django we want to be able to use its templating system to generate web pages) Tj T* 0 Tw .69856 Tw (for us. For us to accomplish this we are going to have to refactor our code. We have to change the way) Tj T* 0 Tw 2.682651 Tw (our code handles html without changing its functionality. TDD also states that we shouldnt do any) Tj T* 0 Tw 1.95832 Tw (refactoring without tests, therefore we are fisrt going to run our last functional test and see if its still) Tj T* 0 Tw (passing. If its passing we can go ahead an modify our functional test:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 589.8236 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 468.6898 60 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 38 Tm /F3 10 Tf 12 TL (def test_home_page_html\(self\):) Tj T* (    request = self.factory.get\('/'\)) Tj T* (    response = Home.as_view\(\)\(request\)) Tj T* (    self.assertEqual\('home.html', response.template_name[0]\)) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 569.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (When we run our tests with Python manage.py test contacts we get an error like the one below:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 500.6236 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 654 60 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 38 Tm /F3 10 Tf 12 TL (Traceback \(most recent call last\):) Tj T* (    File "/home/hamub/projects/tdd_tutorial/addressbook/contacts/tests.py", line 14, in test_home_page_html) Tj T* (     response = Home.as_view\(\)\(request\)) Tj T* (NameError: name 'Home' is not defined) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 456.6236 cm
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F1 10 Tf 12 TL .382765 Tw (We then start the unittest-code cycle again to make our tests pass. In this case reading the traceback we) Tj T* 0 Tw 1.043988 Tw (can find out that "home" is not defined as we have not imported it.Let us change home to Home in the) Tj T* 0 Tw (import statements. When we run our tests again we see that there is another error:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 339.4236 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 678 108 re B*
Q
q
BT 1 0 0 1 0 86 Tm 12 TL /F3 10 Tf 0 0 0 rg (ImportError: Failed to import test module: contacts.testsTraceback \(most recent call last\):  File "/usr/lib/pyt) Tj T*  T* (hon3.5/unittest/loader.py", line 428, in _find_test_path    module = s) Tj T* (elf._get_module_from_name\(name\)  File "/usr/lib/python3.5/unittest/loa) Tj T* (der.py", line 369, in _get_module_from_name    __import__\(name\)  File) Tj T*  T* ( "/home/hamub/projects/tdd_tutorial/addressbook/contacts/tests.py", line 4, in ) Tj (<) Tj (module) Tj (>) Tj  T* ( from .views import HomeImportError: cannot import name   'Home') Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 295.4236 cm
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F1 10 Tf 12 TL 1.795251 Tw (This is because we have not yet changed our view function to be a class based one. Let us quickly) Tj T* 0 Tw .534651 Tw (change our view function to use django`s generic class based views, by implemanting the following code) Tj T* 0 Tw (in our views.py dont forget to import TemplateView from django.views:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 250.2236 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 468.6898 36 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F3 10 Tf 12 TL (class Home\(TemplateView\):) Tj T* (    template_name = 'home.html') Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 206.2236 cm
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F1 10 Tf 12 TL 1.069036 Tw (We run our tests again, they seem to pass. But let us check with our functional tests to see if they are) Tj T* 0 Tw 1.539985 Tw (passing, by going to the terminal and running python acceptance.py. After the test we should see the) Tj T* 0 Tw (following error:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 149.0236 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 480 48 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F3 10 Tf 12 TL (Traceback \(most recent call last\):) Tj T* (  File "acceptance.py", line 19, in test_django_page\('h1'\).textAssertionError:) Tj T* (False is not true) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 81.02362 cm
q
0 0 0 rg
BT 1 0 0 1 0 50 Tm /F1 10 Tf 12 TL 1.741654 Tw (s is beacause we have not created any templates. But if we look closely at the tracebacks when we) Tj T* 0 Tw .422619 Tw (manually open the browser we see that there is a problem with our urls.py . Let us quicly alter everything) Tj T* 0 Tw 1.192339 Tw (since we are now using class based views. Let us quicly create a directory called templates inside our) Tj T* 0 Tw 1.098735 Tw (contacts directory and inside templates create a template called "home.html" and in that file we put the) Tj T* 0 Tw (following markup:) Tj T* ET
Q
Q
 
endstream
endobj
10 0 obj
<< /Count 0 /Type /Outlines >>
endobj
11 0 obj
<< /Nums [ 0 12 0 R ] >>
endobj
12 0 obj
<< /S /D /St 1 >>
endobj
xref
0 13
0000000000 65535 f
0000000075 00000 n
0000000129 00000 n
0000000239 00000 n
0000000354 00000 n
0000000462 00000 n
0000000669 00000 n
0000000776 00000 n
0000001048 00000 n
0000001110 00000 n
0000006651 00000 n
0000006701 00000 n
0000006745 00000 n
trailer
<< /ID 
 % ReportLab generated PDF document -- digest (http://www.reportlab.com)
 [(s\305bYXp\327\004\330X\340\024E\3004^) (s\305bYXp\327\004\330X\340\024E\3004^)]
 /Info 7 0 R /Root 6 0 R /Size 13 >>
startxref
6782
%%EOF
