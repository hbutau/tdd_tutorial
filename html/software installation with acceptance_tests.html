<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Is Django Installed? &#8212; tdd_tutorial 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="tdd_tutorial 1.0 documentation" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="is-django-installed">
<h1>Is Django Installed?<a class="headerlink" href="#is-django-installed" title="Permalink to this headline">¶</a></h1>
<p>In TDD the first step is always to write a failing test. We are going to use Selenium to check if Django is up and running by writting a test that will check whether we have the correct html in the page that is rendered by the development server. We start by writting  a failing  acceptance test to check if django is running with the following code:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">selenium</span> <span class="k">import</span> <span class="n">webdriver</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">()</span>
<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;localhost:8000&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="s2">&quot;It worked!&quot;</span> <span class="ow">in</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_tag_name</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
<p>If you went through the Django tutorial you should already know that running the django develpment server, opening <a class="reference external" href="http://localhost:8000">http://localhost:8000</a> should have a page with a heading that says &#8220;It worked!&#8221; . this should give us the following error if django is not installed or running properly:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python acceptance.py
Traceback (most recent call last):  Fil
e &quot;acceptance.py&quot;, line 5, in &lt;module&gt;

assert &#39;It worked!&#39; in driver.find_element_by_tag_name(&#39;h1&#39;).text
AssertionError
</pre></div>
</div>
<p>After  running our test and seeing it fail as expected the next step in TDD is to write the minimum amount of code to make our tests passs. In our case we can continue to install Django if we didnt and also start a django project. We start a django project with the following command in the terminal:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">django</span><span class="o">-</span><span class="n">admin</span> <span class="n">startproject</span> <span class="n">addressbook</span> <span class="o">.</span>
</pre></div>
</div>
<p>This command tells django to create a project in the current directory as shown by the period(.).</p>
<p>Now when we run the acceptance test again with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">acceptance</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>we should get no output meaning that our acceptance test passed and therefore django is up and running. Now that our functional test has led us to starting a django project we need to tweak it by changing it so that it uses the Python Standard  library unittest for testing. We want it to at least give us some information on how the test failed.</p>
</div>
<div class="section" id="functional-tests-with-unittest">
<h1>Functional Tests with unittest<a class="headerlink" href="#functional-tests-with-unittest" title="Permalink to this headline">¶</a></h1>
<p>We are now going to use the standard python library`s unittest module in our acceptance test. In unit testing with unittest our test are encapsulated in Classes that inherit from TestCase. Our individual tests are then found in test methods that begin with test in their names so that they can be discovered and run by the test runner. We then have a number of functions to make assertions, like assertEqual, assertIn e.t.c. Lets open up acceptance.py with a text editor of our choice and add the following code:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">selenium</span> <span class="k">import</span> <span class="n">webdriver</span>
<span class="kn">import</span> <span class="nn">unittest</span>


<span class="n">Class</span> <span class="n">Django_Page_Test</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;localhost:8000&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">teardown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_django_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;It worked!&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_tag_name</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
<p>Now that we have a passing unittest we want to write a functional test . Functional tests or end-to-end tests are used for checking the overall functionality of our programmes. Whilst unittest test the program form inside from the programmer`s point of view. All our coding should be inspired firstly by functional test, followed by the smallest amount of code that we can to make the test passes. After that we unittest our code and if it passes we refactor if necessary, otherwise we go back to unitesting. Since the last test we wrote passed why not write a functional test to check whether our webpage returns the expected html. Let us open our text editors and write the following code:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">selenium</span> <span class="k">import</span> <span class="n">webdriver</span>

<span class="k">class</span> <span class="nc">Django_Page_Test</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;localhost:8000&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_django_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;Welcome to Adressbook&#39;</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_tag_name</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>if we run our functional test with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">acceptance</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>we should see the following error:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
<span class="n">File</span> <span class="s2">&quot;/home/hamub/projects/tdd_tutorial/addressbook/acceptance.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">17</span><span class="p">,</span> <span class="ow">in</span> <span class="n">test_django_page</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;Welcome to Adressbook&#39;</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_tag_name</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="ne">AssertionError</span><span class="p">:</span> <span class="kc">False</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">true</span>

<span class="o">----------------------------------------------------------------------</span>
</pre></div>
</div>
<p>Now that we have have a failing test which expected our home page to specify that there should be a heading mentioning Welcome to Addressbook, it is time we start writing our unittest and production code for this test to pass.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Is Django Installed?</a></li>
<li><a class="reference internal" href="#functional-tests-with-unittest">Functional Tests with unittest</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/software installation with acceptance_tests.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Humphrey Butau.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/software installation with acceptance_tests.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>